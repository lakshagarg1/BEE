<div class="dashboard">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1 class="welcome-title">
        <i class="fas fa-sticky-note"></i>
        Welcome back, <%= username %>!
      </h1>
      <p class="welcome-subtitle">Ready to capture your next great idea?</p>
    </div>
    <div class="welcome-actions">
      <a href="/add" class="btn btn-primary btn-lg">
        <i class="fas fa-plus"></i>
        Create New Note
      </a>
    </div>
  </div>

  <!-- Stats Section -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-file-alt"></i>
      </div>
      <div class="stat-content">
        <h3><%= notes.length %></h3>
        <p>Total Notes</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-tags"></i>
      </div>
      <div class="stat-content">
        <h3><%= categories.length %></h3>
        <p>Categories</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-clock"></i>
      </div>
      <div class="stat-content">
        <h3>Recent</h3>
        <p>Activity</p>
      </div>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-section">
    <form method="GET" action="/" class="search-form">
      <div class="search-input-group">
        <i class="fas fa-search search-icon"></i>
        <input
          type="text"
          name="search"
          placeholder="Search your notes..."
          value="<%= search %>"
          class="search-input"
        />
      </div>
      
      <div class="filter-group">
        <select name="category" class="filter-select">
          <option value="">All Categories</option>
          <% categories.forEach((cat) => { %>
          <option value="<%= cat %>" <%= category === cat ? "selected" : "" %>>
            <i class="fas fa-tag"></i> <%= cat %>
          </option>
          <% }) %>
        </select>
        
        <button type="submit" class="btn btn-secondary">
          <i class="fas fa-filter"></i>
          Filter
        </button>
        
        <% if (search || category) { %>
        <a href="/" class="btn btn-outline">
          <i class="fas fa-times"></i>
          Clear
        </a>
        <% } %>
      </div>
    </form>
  </div>

  <!-- Notes Section -->
  <div class="notes-section">
    <div class="section-header">
      <h2 class="section-title">
        <i class="fas fa-sticky-note"></i>
        Your Notes
        <% if (search || category) { %>
          <span class="filter-badge">
            <% if (search) { %>
              Search: "<%= search %>"
            <% } %>
            <% if (category) { %>
              Category: <%= category %>
            <% } %>
          </span>
        <% } %>
      </h2>
    </div>

    <% if (notes.length === 0) { %>
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-sticky-note"></i>
        </div>
        <h3>No notes found</h3>
        <% if (search || category) { %>
          <p>Try adjusting your search or filter criteria.</p>
          <a href="/" class="btn btn-primary">
            <i class="fas fa-arrow-left"></i>
            View All Notes
          </a>
        <% } else { %>
          <p>Start by creating your first note!</p>
          <a href="/add" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Create Your First Note
          </a>
        <% } %>
      </div>
    <% } else { %>
      <div class="notes-grid">
        <% notes.forEach((note) => { %>
          <article class="note-card">
            <div class="note-header">
              <h3 class="note-title"><%= note.title %></h3>
              <div class="note-category">
                <i class="fas fa-tag"></i>
                <%= note.category %>
              </div>
            </div>
            
            <div class="note-content">
              <p><%= note.content.length > 150 ? note.content.substring(0, 150) + '...' : note.content %></p>
            </div>
            
            <div class="note-footer">
              <div class="note-meta">
                <span class="note-date">
                  <i class="fas fa-calendar-alt"></i>
                  <%= new Date(note.date).toLocaleDateString() %>
                </span>
              </div>
              
              <div class="note-actions">
                <a href="/edit/<%= note.id %>" class="btn btn-sm btn-outline" title="Edit note">
                  <i class="fas fa-edit"></i>
                </a>
                <form method="POST" action="/delete/<%= note.id %>" style="display: inline" 
                      onsubmit="return confirm('Are you sure you want to delete this note?')">
                  <button type="submit" class="btn btn-sm btn-danger" title="Delete note">
                    <i class="fas fa-trash"></i>
                  </button>
                </form>
              </div>
            </div>
          </article>
        <% }) %>
      </div>
    <% } %>
  </div>
</div>